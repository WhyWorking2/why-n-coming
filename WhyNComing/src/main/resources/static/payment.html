<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>결제 테스트</title>
</head>
<body>
<h2>토스 결제 테스트</h2>
<button onclick="startPayment()">결제하기</button>

<script>
    function startPayment() {
        fetch('/v1/order/payments/ready', { // ✅ 백엔드 API 호출
            method: 'POST'
        })
            .then(response => response.json())
            .then(data => {
                console.log("✅ 응답 데이터:", data);
                if (data.checkoutUrl) {
                    // ✅ Toss 결제창으로 리다이렉트
                    window.location.href = data.checkoutUrl;
                } else {
                    alert('checkoutUrl이 응답에 없습니다. 백엔드 응답 확인 필요');
                }
            })
            .catch(error => {
                console.error("❌ 결제 요청 실패:", error);
                alert('결제 요청 중 오류 발생');
            });
    }
</script>
</body>
</html>